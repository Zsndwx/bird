webpackJsonp([4],{"+BTb":function(t,e){},"0yGc":function(t,e){},"22O3":function(t,e,n){"use strict";var i=n("mvHQ"),s=n.n(i),r=window.localStorage;e.a={set:function(t,e){void 0!==e&&r.setItem(t,function(t){return s()(t)}(e))},get:function(t,e){var n=function(t){if("string"!=typeof t)return;try{return JSON.parse(t)}catch(e){return t||void 0}}(r.getItem(t));return void 0===n?e:n},remove:function(t){r.removeItem(t)},clear:function(){r.clear()}}},"588p":function(t,e){},JA5v:function(t,e){},ar59:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("/l8+"),s=n("llH5"),r={name:"SearchHeader",components:{MeNavbar:i.a,MeSearchbox:s.a},methods:{query:function(t){this.$emit("query",t)},goToBack:function(){this.$router.back()}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("me-navbar",{staticClass:"header"},[e("i",{staticClass:"iconfont icon-back",attrs:{slot:"left"},on:{click:this.goToBack},slot:"left"}),this._v(" "),e("me-searchbox",{attrs:{slot:"center",placeholder:"开学季有礼，好货5折起"},on:{query:this.query},slot:"center"})],1)},staticRenderFns:[]};var a=n("VU/8")(r,o,!1,function(t){n("588p")},"data-v-5ac2c834",null).exports,c=n("8MDr"),l=n("//Fk"),u=n.n(l),f=n("odKQ"),h=n("22O3"),m={methods:{$_search_selectItem:function(t){var e=h.a.get("mall-search-history-keyword-key",[]);0!==e.length&&(e=e.filter(function(e){return e!==t})),e.unshift(t),h.a.set("mall-search-history-keyword-key",e),location.href="https://s.m.taobao.com/h5?event_submit_do_new_search_auction=1&_input_charset=utf-8&topSearch=1&atype=b&searchfrom=1&action=home%3Aredirect_app_action&from=1&sst=1&n=20&buying=buyitnow&q="+t}}},v=n("cQcd"),d=n("T452"),y={name:"SearchHot",components:{MeLoading:f.a},mixins:[m],created:function(){var t=this;this.getHotkeyword().then(function(){t.$emit("loaded")})},data:function(){return{hots:[]}},methods:{getHotkeyword:function(){var t=this;return u.a.resolve({owner:["燃气壁挂炉","拼装模型","铝合金门窗","电脑桌","小米手环","苏打水","按摩椅","万宝龙钱包","洗面奶","电视柜","豆浆机","黄金项链","摩托车跑车","防尘鞋架","无线扩音器","加湿器","游戏方向盘","固态硬盘","年中爆款速来抢!","好物优选"]}).then(function(t){return new u.a(function(e){setTimeout(function(){e(t.owner)},1e3)})}).then(function(e){return new u.a(function(n){e&&(t.hots=e,n())})})}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hot"},[n("h4",{staticClass:"hot-title"},[t._v("热门搜索")]),t._v(" "),t.hots.length?n("ul",{staticClass:"hot-list"},t._l(t.hots,function(e,i){return n("li",{key:i,staticClass:"hot-item",on:{click:function(n){return t.$_search_selectItem(e)}}},[t._v(t._s(e))])}),0):n("div",{staticClass:"loading-container"},[n("me-loading")],1)])},staticRenderFns:[]};var _=n("VU/8")(y,p,!1,function(t){n("JA5v")},"data-v-654549e0",null).exports,g={name:"SearchHistory",mixins:[m],created:function(){this.getKeyword()},methods:{update:function(){this.getKeyword()},getKeyword:function(){this.historys=h.a.get("mall-search-history-keyword-key",[])},removeItem:function(t){var e=this;this.historys=this.historys.filter(function(e){return e!==t}),h.a.set("mall-search-history-keyword-key",this.historys),setTimeout(function(){e.$emit("remove-item",t)},100)},showGonfirm:function(){this.$emit("show-confirm")},clearHistory:function(){h.a.remove("mall-search-history-keyword-key"),this.update()}},data:function(){return{historys:[]}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.historys.length?n("div",{staticClass:"history"},[n("h4",{staticClass:"history-title"},[t._v("历史搜索")]),t._v(" "),n("transition-group",{staticClass:"g-list",attrs:{tag:"ul",name:"list"}},t._l(t.historys,function(e){return n("li",{key:e,staticClass:"g-list-item",on:{click:function(n){return t.$_search_selectItem(e)}}},[n("span",{staticClass:"g-list-text"},[t._v(t._s(e))]),t._v(" "),n("i",{staticClass:"iconfont icon-delete",on:{click:function(n){return n.stopPropagation(),t.removeItem(e)}}})])}),0),t._v(" "),n("a",{staticClass:"history-btn",attrs:{href:"javascript:;"},on:{click:t.showGonfirm}},[n("i",{staticClass:"iconfont icon-clear"}),t._v("\n    清空历史记录\n  ")])],1):t._e()},staticRenderFns:[]};var C=n("VU/8")(g,w,!1,function(t){n("ouIL")},"data-v-4272596d",null).exports,b={name:"MeConfirm",props:{title:{type:String,default:""},msg:{type:String,default:"确定执行此操作吗？"},cancelBtnText:{type:String,default:"取消"},confirmBrnText:{type:String,default:"确定"}},data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},cancel:function(){this.hide(),this.$emit("cancel")},confirm:function(){this.hide(),this.$emit("confirm")}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"mine-confirm"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"mine-confirm-wrapper"},[n("div",{staticClass:"mine-confirm"},[t.title?n("div",{staticClass:"mine-confirm-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("div",{staticClass:"mine-confirm-msg"},[t._v(t._s(t.msg))]),t._v(" "),n("div",{staticClass:"mine-confirm-btns"},[n("button",{staticClass:"mine-confirm-btn mine-confirm-cancel",on:{click:t.cancel}},[t._v(t._s(t.cancelBtnText))]),t._v(" "),n("button",{staticClass:"mine-confirm-btn mine-confirm-ok",on:{click:t.confirm}},[t._v(t._s(t.confirmBrnText))])])])])])},staticRenderFns:[]};var x=n("VU/8")(b,k,!1,function(t){n("yTAH")},"data-v-780f3b65",null).exports,q={name:"SearchResult",components:{MeLoading:f.a},mixins:[m],data:function(){return{visible:!0,results:[]}},watch:{query:function(t){this.getResult(t)}},methods:{getResult:function(t){var e=this;t&&(this.visible=!0,function(t){var e={q:t,code:"utf-8",area:"c2c",nick:"",sid:null};return Object(v.a)("https://suggest.taobao.com/sug",e,d.d).then(function(t){if(t.result)return t.result;throw new Error("没有成功获取到数据!")}).catch(function(t){t&&console.log(t)}).then(function(t){return new u.a(function(e){setTimeout(function(){e(t)},1e3)})})}(t).then(function(t){t&&(e.results=t,e.visible=!1)}))}},props:{query:{type:String,default:""}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"loading-container"},[n("me-loading")],1),t._v(" "),t.results.length?n("ul",{staticClass:"g-list"},t._l(t.results,function(e,i){return n("li",{key:i,staticClass:"g-list-item",on:{click:function(n){return t.$_search_selectItem(e[0])}}},[n("span",{staticClass:"g-list-text"},[t._v(t._s(e[0]))])])}),0):n("div",{staticClass:"no-result"},[t._v("没有结果")])])},staticRenderFns:[]};var $=n("VU/8")(q,S,!1,function(t){n("xyRZ")},"data-v-238f31ff",null).exports,H={name:"Search",components:{SearchHeader:a,MeScroll:c.a,SearchHot:_,SearchHistory:C,MeConfirm:x,SearchResult:$},data:function(){return{query:""}},methods:{getQuery:function(t){this.query=t},showConfirm:function(){console.log("点击清空历史按钮 弹窗！"),this.$refs.confirm&&this.$refs.confirm.show()},confirm:function(){this.$refs.history&&this.$refs.history.clearHistory()},updateScroll:function(){this.$refs.scroll&&this.$refs.scroll.update()}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"search"}},[n("div",{staticClass:"search"},[n("header",{staticClass:"g-header-container"},[n("search-header",{on:{query:t.getQuery}})],1),t._v(" "),n("div",{staticClass:"g-content-container"},[n("me-scroll",{ref:"scroll",on:{"scroll-end":t.updateScroll}},[n("search-hot",{directives:[{name:"show",rawName:"v-show",value:!t.query,expression:"!query"}],on:{loaded:t.updateScroll}}),t._v(" "),n("search-history",{directives:[{name:"show",rawName:"v-show",value:!t.query,expression:"!query"}],ref:"history",on:{"show-confirm":t.showConfirm,"remove-item":t.updateScroll}}),t._v(" "),n("search-result",{directives:[{name:"show",rawName:"v-show",value:t.query,expression:"query"}],attrs:{query:t.query}})],1)],1),t._v(" "),n("me-confirm",{ref:"confirm",attrs:{msg:"确定要清空吗？"},on:{confirm:t.confirm}})],1)])},staticRenderFns:[]};var R=n("VU/8")(H,T,!1,function(t){n("0yGc")},"data-v-4244a860",null);e.default=R.exports},llH5:function(t,e,n){"use strict";var i={name:"MeSearchbox",props:{placeholder:{type:String,default:"请输入搜索内容"},fack:{type:Boolean,default:!1}},data:function(){return{query:""}},watch:{query:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=null;return function(){for(var i=this,s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];n&&clearTimeout(n),n=setTimeout(function(){t.apply(i,r)},e)}}(function(){this.$emit("query",this.query)})},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},clear:function(){this.query=""},reset:function(){this.clear(),this.focus()}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mine-search-box-wrapper"},[n("i",{staticClass:"iconfont icon-search"}),t._v(" "),t.fack?n("div",{staticClass:"mine-search-box"},[t._v(t._s(t.placeholder))]):t._e(),t._v(" "),t.fack?t._e():n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",staticClass:"mine-search-box",attrs:{type:"text",title:"搜索框",placeholder:t.placeholder},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.query,expression:"query"}],staticClass:"iconfont icon-close",on:{click:t.reset}})])},staticRenderFns:[]};var r=n("VU/8")(i,s,!1,function(t){n("+BTb")},"data-v-753f23fc",null);e.a=r.exports},mvHQ:function(t,e,n){t.exports={default:n("qkKv"),__esModule:!0}},ouIL:function(t,e){},qkKv:function(t,e,n){var i=n("FeBl"),s=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},xyRZ:function(t,e){},yTAH:function(t,e){}});